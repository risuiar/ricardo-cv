---
// Language detection and redirect will be handled by client-side JavaScript
// This allows for a smooth animation before redirect
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="generator" content={Astro.generator} />
    <title>Ricardo Vögeli – Senior Frontend Engineer</title>
    <meta
      name="description"
      content="Senior Frontend Engineer with backend experience, performance focus and scalable UI architecture."
    />
    <meta
      property="og:title"
      content="Ricardo Vögeli – Senior Frontend Engineer"
    />
    <meta
      property="og:description"
      content="Senior Frontend Engineer with backend experience, performance focus and scalable UI architecture."
    />
    <meta property="og:image" content="/ricardo-profile.jpg" />
  </head>
  <body class="redirect-body">
    <div class="redirect-container">
      <div class="redirect-content">
        <div class="redirect-logo">
          <svg
            class="spinner"
            width="64"
            height="64"
            viewBox="0 0 64 64"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle
              class="spinner-circle"
              cx="32"
              cy="32"
              r="28"
              fill="none"
              stroke="currentColor"
              stroke-width="4"
              stroke-linecap="round"
              stroke-dasharray="44"
              stroke-dashoffset="11"></circle>
          </svg>
        </div>
        <h1 class="redirect-title">Ricardo Vögeli</h1>
        <p class="redirect-subtitle">
          Redirecting to your preferred language...
        </p>
      </div>
    </div>

    <style is:global>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      .redirect-body {
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100vh;
        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        overflow: hidden;
      }

      .redirect-container {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      .redirect-content {
        text-align: center;
        color: white;
        animation: fadeIn 0.5s ease-out;
      }

      .redirect-logo {
        margin-bottom: 2rem;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .spinner {
        color: #3b82f6;
        animation: rotate 1.5s linear infinite;
      }

      .spinner-circle {
        animation: dash 1.5s ease-in-out infinite;
      }

      .redirect-title {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        letter-spacing: -0.02em;
        background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .redirect-subtitle {
        font-size: 1rem;
        color: #cbd5e1;
        font-weight: 400;
        opacity: 0.9;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes dash {
        0% {
          stroke-dasharray: 44;
          stroke-dashoffset: 11;
        }
        50% {
          stroke-dasharray: 44;
          stroke-dashoffset: 44;
        }
        100% {
          stroke-dasharray: 44;
          stroke-dashoffset: 11;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @media (min-width: 640px) {
        .redirect-title {
          font-size: 2.5rem;
        }

        .redirect-subtitle {
          font-size: 1.125rem;
        }
      }

      @media (min-width: 768px) {
        .redirect-title {
          font-size: 3rem;
        }
      }
    </style>

    <script>
      (function () {
        const supportedLangs = ["de", "en", "es"];
        const defaultLang = "en";

        // Get language priority:
        // 1. Query parameter (explicit user choice)
        // 2. Browser language (respect user's browser settings)
        // 3. Default (en)

        function detectLanguage() {
          // 1. Check URL query parameter (highest priority - explicit user choice)
          const urlParams = new URLSearchParams(window.location.search);
          const langParam = urlParams.get("lang");
          if (langParam && supportedLangs.includes(langParam)) {
            return langParam;
          }

          // 2. Check browser language (respect browser settings)
          // Try navigator.languages array first (user's preferred languages in order)
          if (navigator.languages && navigator.languages.length > 0) {
            for (const lang of navigator.languages) {
              const langCode = lang.split("-")[0].toLowerCase();
              if (supportedLangs.includes(langCode)) {
                return langCode;
              }
            }
          }

          // Fallback to navigator.language
          if (navigator.language) {
            const browserLang = navigator.language.split("-")[0].toLowerCase();
            if (supportedLangs.includes(browserLang)) {
              return browserLang;
            }
          }

          // 3. Default to English
          return defaultLang;
        }

        function redirect() {
          const lang = detectLanguage();

          // Small delay for animation, then redirect
          setTimeout(() => {
            window.location.href = `/${lang}/`;
          }, 800);
        }

        // Start detection and redirect
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", redirect);
        } else {
          redirect();
        }
      })();
    </script>
  </body>
</html>
